import{f as w,j as s,e as N,c as O,H as R,s as F,B as j,u as S,I as W,n as L,p as H,L as c,O as P,P as T}from"./index-DaKMN1yZ.js";import{q as v,V as C,j as q,m as z,r as E,f as b,l as I,s as V,b as U,t as $}from"./index-DCkPA7ii.js";import{c as Y,g as G,S as J,f as K,M as A,a as B,b as D,u as Q}from"./chunk-Z3VR2BFQ-gVd_s3GH.js";import{I as k,D as X,a as Z}from"./chunk-65IR7CTH-CPIYFkYf.js";import{B as ss}from"./chunk-Z6RXEUPO-VoMs9AXz.js";import{H as d,D as M}from"./chunk-W7WUSNWJ-xyNjI2Wo.js";import{T as l,B as n}from"./chunk-ZHMYA64R-DpJu8I27.js";import{F as u}from"./index-DM64X-fq.js";import{I as g}from"./chunk-QINAG4RG-CdqfM4pg.js";import{A as es}from"./chunk-V7PAE35Z-Pi7vmoPR.js";import{M as os,a as ns,b as rs}from"./chunk-4FCEGNGT-Dti3ODPF.js";import"./iconBase-_M4XJSaB.js";var _=w((e,r)=>{const t=Y();return s.jsx(N.span,{ref:r,...e,__css:t.command,className:"chakra-menu__command"})});_.displayName="MenuCommand";var y=w((e,r)=>{const{icon:t,iconSpacing:x="0.75rem",command:a,commandSpacing:h="0.75rem",children:m,...i}=e,o=G(i,r),f=t||a?s.jsx("span",{style:{pointerEvents:"none",flex:1},children:m}):m;return s.jsxs(J,{...o,className:O("chakra-menu__menuitem",o.className),children:[t&&s.jsx(K,{fontSize:"0.8em",marginEnd:x,children:t}),f,a&&s.jsx(_,{marginStart:h,children:a})]})});y.displayName="MenuItem";const ts="/haban-project/web-logo-new.svg",as=({notification:e,onItemClick:r,onMarkAsRead:t})=>{const x=S(e.read?"white":"gray.50",e.read?"gray.800":"gray.700");return s.jsx(j,{py:2,px:3,onClick:()=>r(e),bg:x,_hover:{bg:S("gray.100","gray.600")},borderLeft:e.read?"none":"3px solid",borderLeftColor:"brand.500",cursor:"pointer",role:"group",children:s.jsxs(C,{align:"stretch",spacing:1,width:"100%",children:[s.jsxs(d,{justifyContent:"space-between",children:[s.jsx(l,{fontWeight:e.read?"medium":"bold",fontSize:"sm",children:e.title}),!e.read&&s.jsx(u,{p:1,borderRadius:"md",_hover:{bg:"gray.200"},onClick:a=>{a.stopPropagation(),t(e._id,a)},alignItems:"center",justifyContent:"center",cursor:"pointer",title:"Mark as read",children:s.jsx(W,{as:q,boxSize:3})})]}),s.jsx(l,{fontSize:"xs",color:"gray.500",noOfLines:2,children:e.message}),s.jsx(l,{fontSize:"xs",color:"gray.500",mt:1,children:new Date(e.createdAt).toLocaleString("th-TH",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})})},is=e=>{const{notifications:r,unreadCount:t,markAsRead:x,markAllAsRead:a}=R(),h=F(),m=o=>{x(o._id),o.type==="match"&&o.data.dogId?h(`/dogs/${o.data.dogId}`):o.type==="status_update"&&o.data.dogId&&h(`/dogs/${o.data.dogId}`)},i=(o,p)=>{p.stopPropagation(),x(o)};return s.jsx(j,{...e,children:s.jsxs(A,{closeOnSelect:!1,children:[s.jsx(B,{as:k,"aria-label":"Notifications",icon:s.jsx(v,{}),variant:"ghost",position:"relative",color:t>0?"brand.500":void 0,children:t>0&&s.jsx(ss,{colorScheme:"red",borderRadius:"full",position:"absolute",top:"-1px",right:"-1px",fontSize:"xs",children:t})}),s.jsxs(D,{zIndex:100,minW:"300px",maxH:"400px",overflowY:"auto",children:[s.jsx(j,{px:4,py:2,borderBottomWidth:"1px",children:s.jsxs(d,{justify:"space-between",children:[s.jsx(l,{fontWeight:"bold",children:"การแจ้งเตือน"}),t>0&&s.jsx(n,{size:"xs",colorScheme:"brand",variant:"outline",onClick:()=>a(),children:"อ่านทั้งหมด"})]})}),r.length===0?s.jsx(j,{py:6,textAlign:"center",children:s.jsx(l,{color:"gray.500",children:"ไม่มีการแจ้งเตือน"})}):s.jsx(C,{spacing:0,align:"stretch",divider:s.jsx(M,{}),children:r.map(o=>s.jsx(as,{notification:o,onItemClick:m,onMarkAsRead:i},o._id))}),s.jsx(M,{}),s.jsx(j,{py:2,px:3,children:s.jsx(n,{size:"sm",width:"100%",variant:"ghost",onClick:()=>h("/notifications"),children:"ดูการแจ้งเตือนทั้งหมด"})})]})]})})},ls=()=>{const{isAuthenticated:e,user:r,logout:t}=L(),x=F(),a=H(),{isOpen:h,onOpen:m,onClose:i}=Q(),o=async()=>{try{await t(),x("/login")}catch(f){console.error("Logout failed:",f)}},p=()=>{a({title:"ต้องเข้าสู่ระบบก่อน",description:"กรุณาลงทะเบียนหรือเข้าสู่ระบบเพื่อแจ้งข้อมูลสุนัข",status:"warning",duration:5e3,isClosable:!0,position:"top"}),x("/register")};return s.jsxs(j,{as:"nav",h:"80px",bg:"white",borderBottom:"1px",borderColor:"neutral.200",position:"sticky",top:0,zIndex:10,boxShadow:"sm",children:[s.jsxs(u,{h:"100%",px:4,align:"center",justify:"space-between",maxW:"100%",mx:"auto",children:[s.jsx(c,{to:"/",children:s.jsx(g,{h:"60px",src:ts,alt:"หาบ้าน.com"})}),s.jsxs(d,{spacing:4,display:{base:"none",md:"flex"},children:[s.jsx(n,{as:c,to:"/map",leftIcon:s.jsx(z,{}),variant:"ghost",colorScheme:"brand",size:{base:"md",lg:"lg"},children:"ดูแผนที่"}),e?s.jsxs(s.Fragment,{children:[s.jsx(n,{as:c,to:"/post-lost",variant:"solid",colorScheme:"orange",size:{base:"md",lg:"lg"},children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-lost-custom.svg",h:"24px",alt:"Lost Dog"}),s.jsx(l,{children:"แจ้งสุนัขหาย"})]})}),s.jsx(n,{as:c,to:"/post-found",variant:"solid",colorScheme:"teal",size:{base:"md",lg:"lg"},children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-found-custom.svg",h:"24px",alt:"Found Dog"}),s.jsx(l,{children:"แจ้งพบสุนัข"})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(n,{onClick:p,variant:"solid",colorScheme:"orange",size:{base:"md",lg:"lg"},children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-lost-custom.svg",h:"24px",alt:"Lost Dog"}),s.jsx(l,{children:"แจ้งสุนัขหาย"})]})}),s.jsx(n,{onClick:p,variant:"solid",colorScheme:"teal",size:{base:"md",lg:"lg"},children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-found-custom.svg",h:"24px",alt:"Found Dog"}),s.jsx(l,{children:"แจ้งพบสุนัข"})]})})]})]}),s.jsxs(d,{spacing:4,children:[s.jsx(k,{display:{base:"flex",md:"none"},"aria-label":"Open menu",icon:s.jsx(E,{}),onClick:m,size:"lg"}),s.jsx(is,{display:{base:"none",md:"block"}}),e?s.jsxs(A,{children:[s.jsx(B,{as:n,rounded:"full",variant:"link",cursor:"pointer",children:s.jsx(es,{size:"sm",name:(r==null?void 0:r.name)||"User"})}),s.jsxs(D,{children:[s.jsx(y,{as:c,to:"/profile",icon:s.jsx(b,{}),children:"โปรไฟล์"}),s.jsx(y,{onClick:o,icon:s.jsx(I,{}),children:"ออกจากระบบ"})]})]}):s.jsx(n,{as:c,to:"/login",variant:"outline",colorScheme:"brand",size:{base:"sm",md:"md"},display:{base:"none",md:"inline-flex"},children:"เข้าสู่ระบบ"})]})]}),s.jsxs(X,{isOpen:h,placement:"right",onClose:i,size:"xs",children:[s.jsx(os,{}),s.jsxs(Z,{children:[s.jsx(ns,{}),s.jsx(rs,{pt:10,children:s.jsxs(C,{spacing:4,align:"stretch",children:[s.jsx(n,{as:c,to:"/map",leftIcon:s.jsx(z,{}),variant:"ghost",colorScheme:"brand",size:"lg",justifyContent:"flex-start",onClick:i,children:"ดูแผนที่"}),e?s.jsxs(s.Fragment,{children:[s.jsx(n,{as:c,to:"/post-lost",variant:"solid",colorScheme:"orange",size:"lg",justifyContent:"flex-start",onClick:i,children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-lost-custom.svg",h:"24px",alt:"Lost Dog"}),s.jsx(l,{children:"แจ้งสุนัขหาย"})]})}),s.jsx(n,{as:c,to:"/post-found",variant:"solid",colorScheme:"teal",size:"lg",justifyContent:"flex-start",onClick:i,children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-found-custom.svg",h:"24px",alt:"Found Dog"}),s.jsx(l,{children:"แจ้งพบสุนัข"})]})}),s.jsx(n,{as:c,to:"/profile",leftIcon:s.jsx(b,{}),variant:"ghost",colorScheme:"brand",size:"lg",justifyContent:"flex-start",onClick:i,children:"โปรไฟล์"}),s.jsx(n,{as:c,to:"/notifications",leftIcon:s.jsx(v,{}),variant:"ghost",colorScheme:"brand",size:"lg",justifyContent:"flex-start",onClick:i,children:"การแจ้งเตือน"}),s.jsx(n,{onClick:()=>{o(),i()},leftIcon:s.jsx(I,{}),variant:"ghost",colorScheme:"red",size:"lg",justifyContent:"flex-start",children:"ออกจากระบบ"})]}):s.jsxs(s.Fragment,{children:[s.jsx(n,{onClick:()=>{p(),i()},variant:"solid",colorScheme:"orange",size:"lg",justifyContent:"flex-start",children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-lost-custom.svg",h:"24px",alt:"Lost Dog"}),s.jsx(l,{children:"แจ้งสุนัขหาย"})]})}),s.jsx(n,{onClick:()=>{p(),i()},variant:"solid",colorScheme:"teal",size:"lg",justifyContent:"flex-start",children:s.jsxs(d,{spacing:2,children:[s.jsx(g,{src:"/marker-found-custom.svg",h:"24px",alt:"Found Dog"}),s.jsx(l,{children:"แจ้งพบสุนัข"})]})}),s.jsx(n,{as:c,to:"/login",variant:"outline",colorScheme:"brand",size:"lg",justifyContent:"flex-start",onClick:i,children:"เข้าสู่ระบบ"})]})]})})]})]})]})},cs=()=>{const e=P(),{isAuthenticated:r}=L(),x=[{icon:V,label:"หน้าแรก",path:"/"},{icon:U,label:"แผนที่",path:"/map"},{icon:$,label:"แจ้งสุนัข",path:"/post-lost"},{icon:v,label:"แจ้งเตือน",path:"/notifications",requiresAuth:!0},{icon:b,label:r?"โปรไฟล์":"เข้าสู่ระบบ",path:r?"/profile":"/login"}].filter(a=>!a.requiresAuth||r);return s.jsx(j,{as:"nav",position:"fixed",bottom:0,left:0,right:0,bg:"white",boxShadow:"0 -2px 10px rgba(0,0,0,0.05)",display:{base:"block",md:"none"},zIndex:10,borderTopWidth:"1px",borderColor:"gray.200",children:s.jsx(u,{justify:"space-around",py:2,children:x.map(({icon:a,label:h,path:m})=>s.jsx(c,{to:m,style:{flex:1},children:s.jsxs(u,{direction:"column",align:"center",justify:"center",color:e.pathname===m?"brand.500":"gray.500",_hover:{color:"brand.500"},h:"100%",px:1,children:[s.jsx(k,{"aria-label":h,icon:s.jsx(a,{}),variant:"ghost",size:"sm",fontSize:"1.2rem"}),s.jsx(l,{fontSize:"xs",mt:1,textAlign:"center",noOfLines:1,children:h})]})},m))})})},Cs=()=>s.jsxs(j,{minH:"100vh",bg:"gray.50",children:[s.jsx(ls,{}),s.jsx(j,{p:{base:2,md:4},pb:{base:"70px",md:4},children:s.jsx(T,{})}),s.jsx(cs,{})]});export{Cs as default};
