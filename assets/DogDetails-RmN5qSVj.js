import{D as y,r as d,n as S,s as D,p as b,j as t,B as n,d as j}from"./index-DaKMN1yZ.js";import{V as v,n as w,m as C,h as B}from"./index-DCkPA7ii.js";import{C as l}from"./chunk-5MKCW436-Crl8gLHr.js";import{S as g,T as e,B as F}from"./chunk-ZHMYA64R-DpJu8I27.js";import{H as o,D as u}from"./chunk-W7WUSNWJ-xyNjI2Wo.js";import{H}from"./chunk-7OLJDQMT-BqdKiONh.js";import{B as I}from"./chunk-Z6RXEUPO-VoMs9AXz.js";import{I as E}from"./chunk-QINAG4RG-CdqfM4pg.js";import"./iconBase-_M4XJSaB.js";const V=()=>{const{id:c}=y(),[s,h]=d.useState(null),[p,m]=d.useState(!0),{user:x}=S();D();const i=b();d.useEffect(()=>{(async()=>{try{if(c){const a=await j.getDog(c);h(a)}}catch{i({title:"Error",description:"Failed to load dog details",status:"error",duration:5e3,isClosable:!0})}finally{m(!1)}})()},[c,i]);const f=r=>r?new Date(r).toLocaleDateString("th-TH",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"ไม่ระบุ";return p?t.jsx(l,{maxW:"container.md",py:8,children:t.jsx(n,{textAlign:"center",children:"Loading..."})}):s?t.jsx(l,{maxW:"container.md",py:8,children:t.jsxs(g,{spacing:8,children:[t.jsx(n,{children:t.jsxs(o,{justify:"space-between",align:"center",mb:4,children:[t.jsxs(H,{size:"xl",color:s.type==="lost"?"red.500":"green.500",children:[s.type==="lost"?"สุนัขหาย":"พบสุนัข",":"," ",s.name||s.breed]}),t.jsx(I,{colorScheme:s.status==="active"?"green":s.status==="resolved"?"blue":"gray",fontSize:"md",px:3,py:1,borderRadius:"full",children:s.status==="active"?"กำลังตามหา":s.status==="resolved"?"พบเจอแล้ว":"หมดเวลา"})]})}),s.photos&&s.photos.length>0&&t.jsx(n,{borderRadius:"lg",overflow:"hidden",maxH:"500px",position:"relative",children:t.jsx(E,{src:s.photos[0],alt:s.breed,objectFit:"cover",w:"100%",h:"100%"})}),t.jsxs(g,{spacing:6,bg:"white",p:6,borderRadius:"lg",shadow:"sm",children:[t.jsxs(v,{align:"stretch",spacing:4,children:[t.jsxs(o,{children:[t.jsx(w,{}),t.jsxs(e,{children:[t.jsxs("strong",{children:[s.type==="lost"?"หายเมื่อ":"พบเมื่อ",":"]})," ",f(s.type==="lost"?s.lastSeen:s.foundDate)]})]}),t.jsxs(o,{children:[t.jsx(C,{}),t.jsxs(e,{children:[t.jsx("strong",{children:"สถานที่:"})," ",s.locationName]})]}),t.jsx(u,{}),t.jsxs(n,{children:[t.jsxs(e,{children:[t.jsx("strong",{children:"พันธุ์:"})," ",s.breed]}),t.jsxs(e,{children:[t.jsx("strong",{children:"สี:"})," ",s.color]}),s.type==="found"&&s.currentStatus&&t.jsxs(e,{children:[t.jsx("strong",{children:"สถานะปัจจุบัน:"})," ",s.currentStatus==="temporary"?"รับเลี้ยงชั่วคราว":"อยู่ที่ศูนย์พักพิง"]})]}),t.jsx(u,{}),t.jsxs(n,{children:[t.jsx(e,{fontWeight:"bold",mb:2,children:"รายละเอียดเพิ่มเติม:"}),t.jsx(e,{whiteSpace:"pre-wrap",children:s.description})]}),(s.contact||s.userContact)&&t.jsxs(t.Fragment,{children:[t.jsx(u,{}),t.jsx(n,{children:t.jsxs(o,{children:[t.jsx(B,{}),t.jsxs(e,{children:[t.jsx("strong",{children:"ติดต่อ:"})," ",s.contact||(s.userContactInfo?`${s.userContact} (${s.userContactInfo})`:s.userContact)]})]})})]})]}),x&&x.id===s.userId&&t.jsx(o,{justify:"flex-end",pt:4,children:t.jsx(F,{colorScheme:s.status==="active"?"blue":"green",onClick:async()=>{try{const r=s.status==="active"?"resolved":"active";await j.updateDogStatus(s._id,r),h(a=>a?{...a,status:r}:null),i({title:"Status updated",status:"success",duration:3e3})}catch{i({title:"Error updating status",status:"error",duration:3e3})}},children:s.status==="active"?"ทำเครื่องหมายว่าพบแล้ว":"เปิดการค้นหาอีกครั้ง"})})]})]})}):t.jsx(l,{maxW:"container.md",py:8,children:t.jsx(n,{textAlign:"center",children:"Dog not found"})})};export{V as default};
