import{r as u,h as Y,E as y,f as q,j as H,e as J,l as Q}from"./index-DaKMN1yZ.js";import{d as L}from"./chunk-ZHMYA64R-DpJu8I27.js";var Z=Object.defineProperty,$=(e,t,n)=>t in e?Z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,o=(e,t,n)=>($(e,typeof t!="symbol"?t+"":t,n),n);function M(e){return e.sort((t,n)=>{const r=t.compareDocumentPosition(n);if(r&Node.DOCUMENT_POSITION_FOLLOWING||r&Node.DOCUMENT_POSITION_CONTAINED_BY)return-1;if(r&Node.DOCUMENT_POSITION_PRECEDING||r&Node.DOCUMENT_POSITION_CONTAINS)return 1;if(r&Node.DOCUMENT_POSITION_DISCONNECTED||r&Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC)throw Error("Cannot sort the given nodes.");return 0})}var ee=e=>typeof e=="object"&&"nodeType"in e&&e.nodeType===Node.ELEMENT_NODE;function w(e,t,n){let r=e+1;return n&&r>=t&&(r=0),r}function U(e,t,n){let r=e-1;return n&&r<0&&(r=t),r}var _=typeof window<"u"?u.useLayoutEffect:u.useEffect,N=e=>e,te=class{constructor(){o(this,"descendants",new Map),o(this,"register",e=>{if(e!=null)return ee(e)?this.registerNode(e):t=>{this.registerNode(t,e)}}),o(this,"unregister",e=>{this.descendants.delete(e);const t=M(Array.from(this.descendants.keys()));this.assignIndex(t)}),o(this,"destroy",()=>{this.descendants.clear()}),o(this,"assignIndex",e=>{this.descendants.forEach(t=>{const n=e.indexOf(t.node);t.index=n,t.node.dataset.index=t.index.toString()})}),o(this,"count",()=>this.descendants.size),o(this,"enabledCount",()=>this.enabledValues().length),o(this,"values",()=>Array.from(this.descendants.values()).sort((t,n)=>t.index-n.index)),o(this,"enabledValues",()=>this.values().filter(e=>!e.disabled)),o(this,"item",e=>{if(this.count()!==0)return this.values()[e]}),o(this,"enabledItem",e=>{if(this.enabledCount()!==0)return this.enabledValues()[e]}),o(this,"first",()=>this.item(0)),o(this,"firstEnabled",()=>this.enabledItem(0)),o(this,"last",()=>this.item(this.descendants.size-1)),o(this,"lastEnabled",()=>{const e=this.enabledValues().length-1;return this.enabledItem(e)}),o(this,"indexOf",e=>{var t,n;return e&&(n=(t=this.descendants.get(e))==null?void 0:t.index)!=null?n:-1}),o(this,"enabledIndexOf",e=>e==null?-1:this.enabledValues().findIndex(t=>t.node.isSameNode(e))),o(this,"next",(e,t=!0)=>{const n=w(e,this.count(),t);return this.item(n)}),o(this,"nextEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),a=w(r,this.enabledCount(),t);return this.enabledItem(a)}),o(this,"prev",(e,t=!0)=>{const n=U(e,this.count()-1,t);return this.item(n)}),o(this,"prevEnabled",(e,t=!0)=>{const n=this.item(e);if(!n)return;const r=this.enabledIndexOf(n.node),a=U(r,this.enabledCount()-1,t);return this.enabledItem(a)}),o(this,"registerNode",(e,t)=>{if(!e||this.descendants.has(e))return;const n=Array.from(this.descendants.keys()).concat(e),r=M(n);t!=null&&t.disabled&&(t.disabled=!!t.disabled);const a={node:e,index:-1,...t};this.descendants.set(e,a),this.assignIndex(r)})}};function ne(){const e=u.useRef(new te);return _(()=>()=>e.current.destroy()),e.current}var[se,R]=Y({name:"DescendantsProvider",errorMessage:"useDescendantsContext must be used within DescendantsProvider"});function re(e){const t=R(),[n,r]=u.useState(-1),a=u.useRef(null);_(()=>()=>{a.current&&t.unregister(a.current)},[]),_(()=>{if(!a.current)return;const i=Number(a.current.dataset.index);n!=i&&!Number.isNaN(i)&&r(i)});const l=N(e?t.register(e):t.register);return{descendants:t,index:n,enabledIndex:t.enabledIndexOf(a.current),register:L(l,a)}}function de(){return[N(se),()=>N(R()),()=>ne(),a=>re(a)]}function ce(e){const{value:t,defaultValue:n,onChange:r,shouldUpdate:a=(h,m)=>h!==m}=e,l=y(r),i=y(a),[d,p]=u.useState(n),f=t!==void 0,c=f?t:d,I=y(h=>{const v=typeof h=="function"?h(c):h;i(c,v)&&(f||p(v),l(v))},[f,l,c,i]);return[c,I]}var ae=q(function(t,n){const{direction:r,align:a,justify:l,wrap:i,basis:d,grow:p,shrink:f,...c}=t,I={display:"flex",flexDirection:r,alignItems:a,justifyContent:l,flexWrap:i,flexBasis:d,flexGrow:p,flexShrink:f};return H.jsx(J.div,{ref:n,__css:I,...c})});ae.displayName="Flex";function oe(){const e=u.useRef(new Map),t=e.current,n=u.useCallback((a,l,i,d)=>{e.current.set(i,{type:l,el:a,options:d}),a.addEventListener(l,i,d)},[]),r=u.useCallback((a,l,i,d)=>{a.removeEventListener(l,i,d),e.current.delete(i)},[]);return u.useEffect(()=>()=>{t.forEach((a,l)=>{r(a.el,a.type,l,a.options)})},[r,t]),{add:n,remove:r}}function P(e){const t=e.target,{tagName:n,isContentEditable:r}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&r!==!0}function fe(e={}){const{ref:t,isDisabled:n,isFocusable:r,clickOnEnter:a=!0,clickOnSpace:l=!0,onMouseDown:i,onMouseUp:d,onClick:p,onKeyDown:f,onKeyUp:c,tabIndex:I,onMouseOver:h,onMouseLeave:m,...v}=e,[b,A]=u.useState(!0),[D,C]=u.useState(!1),x=oe(),K=s=>{s&&s.tagName!=="BUTTON"&&A(!1)},V=b?I:I||0,g=n&&!r,T=u.useCallback(s=>{if(n){s.stopPropagation(),s.preventDefault();return}s.currentTarget.focus(),p==null||p(s)},[n,p]),O=u.useCallback(s=>{D&&P(s)&&(s.preventDefault(),s.stopPropagation(),C(!1),x.remove(document,"keyup",O,!1))},[D,x]),F=u.useCallback(s=>{if(f==null||f(s),n||s.defaultPrevented||s.metaKey||!P(s.nativeEvent)||b)return;const E=a&&s.key==="Enter";l&&s.key===" "&&(s.preventDefault(),C(!0)),E&&(s.preventDefault(),s.currentTarget.click()),x.add(document,"keyup",O,!1)},[n,b,f,a,l,x,O]),j=u.useCallback(s=>{if(c==null||c(s),n||s.defaultPrevented||s.metaKey||!P(s.nativeEvent)||b)return;l&&s.key===" "&&(s.preventDefault(),C(!1),s.currentTarget.click())},[l,b,n,c]),k=u.useCallback(s=>{s.button===0&&(C(!1),x.remove(document,"mouseup",k,!1))},[x]),B=u.useCallback(s=>{if(s.button!==0)return;if(n){s.stopPropagation(),s.preventDefault();return}b||C(!0),s.currentTarget.focus({preventScroll:!0}),x.add(document,"mouseup",k,!1),i==null||i(s)},[n,b,i,x,k]),z=u.useCallback(s=>{s.button===0&&(b||C(!1),d==null||d(s))},[d,b]),G=u.useCallback(s=>{if(n){s.preventDefault();return}h==null||h(s)},[n,h]),W=u.useCallback(s=>{D&&(s.preventDefault(),C(!1)),m==null||m(s)},[D,m]),S=L(t,K);return b?{...v,ref:S,type:"button","aria-disabled":g?void 0:n,disabled:g,onClick:T,onMouseDown:i,onMouseUp:d,onKeyUp:c,onKeyDown:f,onMouseOver:h,onMouseLeave:m}:{...v,ref:S,role:"button","data-active":Q(D),"aria-disabled":n?"true":void 0,tabIndex:g?void 0:V,onClick:T,onMouseDown:B,onMouseUp:z,onKeyUp:j,onKeyDown:F,onMouseOver:G,onMouseLeave:W}}function he(e){const{wasSelected:t,enabled:n,isSelected:r,mode:a="unmount"}=e;return!!(!n||r||a==="keepMounted"&&t)}export{ae as F,fe as a,de as c,he as l,ce as u};
