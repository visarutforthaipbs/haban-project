import{r as c,j as t,B as j}from"./index-DaKMN1yZ.js";import{l as i,M as f,T as k,d as w,a as C}from"./leaflet-C4RW84Ki.js";import{m as S}from"./index-DCkPA7ii.js";import{S as L,B as g,T as E}from"./chunk-ZHMYA64R-DpJu8I27.js";import{F,I as T}from"./chunk-6CVSDS6C-BbEwV9Gm.js";import{F as b}from"./chunk-H46NUPBZ-DTsN5Duz.js";const y=i.Icon.Default.prototype;delete y._getIconUrl;i.Icon.Default.mergeOptions({iconRetinaUrl:"/marker-icon-2x.png",iconUrl:"/marker-icon.png",shadowUrl:"/marker-shadow.png"});const I=[18.7883,98.9853],M=({position:s,onPositionChange:e})=>{const o=w({click(r){e(r.latlng),o.flyTo(r.latlng,o.getZoom())}});return s?t.jsx(C,{position:s}):null},z=({onLocationSelect:s,defaultLocation:e})=>{const[o,r]=c.useState(e?new i.LatLng(e.coordinates[0],e.coordinates[1]):null),[a,p]=c.useState((e==null?void 0:e.name)||""),[m,l]=c.useState(!1),d=n=>{r(n)},h=()=>{o&&a&&s({coordinates:[o.lat,o.lng],name:a})},x=()=>{l(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(n=>{const u=new i.LatLng(n.coords.latitude,n.coords.longitude);r(u),l(!1)},n=>{console.error("Error getting location:",n),l(!1)})};return t.jsxs(L,{spacing:4,children:[t.jsx(j,{height:"300px",borderRadius:"lg",overflow:"hidden",children:t.jsxs(f,{center:o?[o.lat,o.lng]:I,zoom:13,style:{height:"100%",width:"100%"},children:[t.jsx(k,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.jsx(M,{position:o,onPositionChange:d})]})}),t.jsx(g,{leftIcon:t.jsx(S,{}),onClick:x,isLoading:m,loadingText:"กำลังระบุตำแหน่ง...",children:"ใช้ตำแหน่งปัจจุบัน"}),t.jsxs(F,{isRequired:!0,children:[t.jsx(b,{children:"ชื่อสถานที่"}),t.jsx(T,{value:a,onChange:n=>p(n.target.value),placeholder:"เช่น ใกล้ถนนนิมมานเหมินทร์, เมญ่า เชียงใหม่"})]}),o&&t.jsxs(E,{fontSize:"sm",color:"gray.600",children:["พิกัดที่เลือก: ",o.lat.toFixed(6),", ",o.lng.toFixed(6)]}),t.jsx(g,{colorScheme:"brand",onClick:h,isDisabled:!o||!a,children:"ยืนยันตำแหน่ง"})]})};export{z as L};
